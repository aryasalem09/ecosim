<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>ecosim</title>
    <style>
        html, body { margin: 0; height: 100%; background: #0b0f14; overflow: hidden; }
        canvas { width: 100vw; height: 100vh; display: block; outline: none; }
        #err {
            position: fixed;
            left: 12px; right: 12px; bottom: 12px;
            padding: 10px 12px;
            border-radius: 10px;
            background: rgba(255, 80, 80, 0.14);
            color: #ffd6d6;
            font: 13px/1.35 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
            white-space: pre-wrap;
            display: none;
        }
    </style>
</head>
<body>
<canvas id="canvas" tabindex="1"></canvas>
<div id="err"></div>

<script src="./ecosim.js"></script>
<script>
    const start = async () => {
        try {

            if (typeof wasm_bindgen === "function") {
                await wasm_bindgen("./ecosim_bg.wasm");
                return;
            }


            if (typeof init === "function") {
                await init("./ecosim_bg.wasm");
                return;
            }

            throw new Error("ERRORRRR");
        } catch (e) {
            const err = document.getElementById("err");
            err.style.display = "block";
            err.textContent = (e?.stack || String(e));
            console.error(e);
        }
    };

    start();
</script>
